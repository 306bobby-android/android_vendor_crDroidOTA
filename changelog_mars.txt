Highlights & Device Specific Changes:
Build type: Monthly
Device: Xiaomi 11 Pro (mars)
Device maintainer: Flower Sea
Required firmware: build-in

====================
     04-28-2023
====================

Fix known streaming flicker and black screen issues

   * device/xiaomi/sm8350-common
77a6d5b3 sm8350-common: sepolicy: Label libSNPE.so as same process hal file
a453021d sm8350-common: sepolicy: Label camera libraries as same process hal files
8d9579bc sm8350-common: Update display blobs from Sony Xperia 1 III (XQ-BC72) 61.2.A.0.410
b71003eb sm8350-common: Update display HDR blobs from tundra S3SJS32.1-86-1-4
f3ea13c1 sm8350-common: Restructure display blobs sections
54080603 Revert "sm8350-common: media: Update lahaina from miui_STAR_V14.0.6.0.TKACNXM"
f329ff94 Revert "sm8350-common: rootdir: Update kernel post boot scripts from miui_STAR_V14.0.6.0.TKACNXM"

   * frameworks/base
5065e13cd729 OomAdjuster: Remove excessive log
d2512c8673d1 oom: Enable proactive kills only on modern kernels
7d2601f9e4b3 SystemUI: Add pixel style lockscreen weather based OmniJaws
49b3bfd0fb89 SystemUI: Fix keyguard statusbar
fcb0e5990b8b SystemUI: Make QS Header Image less intrusive with codebase
3b915b7711ef SystemUI: QS Header Image [1/2]
e0d22d48389d Use try-with-resources to avoid accidentaly leaking unclosed objects.
6d2b48e503c0 New Crowdin updates (#975)
8ab20e24abda Camera: Bump up the extension jpeg processor blob size
35e394251f45 services: Allow pause/suspend app feature with parallel space
55ff9213850b Revert "DNM Revert "libandroid_runtime: workaround global ThinLTO bug""
10c64bf33718 Revert "DNM Revert "libandroid_defaults: force full LTO to workaround runtime bug""
d4ead95a3abe base: Fix issues with linked volumes
9640ca9c04df AppProfiler: dont be so hectic on cpu battery stats
ce0eeec8456f os: Process: Fix wrong code in isThreadInProcess
77e155e9fee8 SystemUI: Rework dismiss all view in QS
22479fbb0724 Fix unqualified-std-cast-call compiler warning
06e8fa2c0265 HWUI: reset buffer state after MakeCurrent
4457f6ac1391 Restoring SDR brightness immediately when entering dim state if the device is in HDR brightness scale mode.
0f064d3fe751 Return with error logs instead of exception for unexpected nsi
8b53efa5b489 Fix getRootTask may be null led to client NPE
749876fd24c5 Fix task info null crash
3490418e74c6 Fix potential crash when TaskDisplayArea is null
36d4597b68ac Fix wrong ime parent in embedded activity
96c3423c1572 DNM Revert "libandroid_defaults: force full LTO to workaround runtime bug"
76b529c25e78 DNM Revert "libandroid_runtime: workaround global ThinLTO bug"
a25581e41d8e fixup! System crash during dismissing split in multi-user scenario
c4b435b3dbbc Catch exception when dump local window.
de5d201631a3 Fix hang when dumping local window.
34291531f61c Prevent crash with pin protected user and taskview
2b2cbc016061 Activity not finishing even after pressing back key
2a1719051d50 SystemUI: Handle more exceptions for firewall
df262cc5e664 Revert "InsetsStateController: Replace ArrayMap with HashMap for performance"
dca7e0f3d1f6 Fixed process can't start because of mPendingStart is true problem
c2659de0ec4d wm: Prevent NPE for springanimation
bec2fb34bf66 Add a suspension check to SuspendedAppActivity
7ef05a3089c3 PixelPropsUtils: Don't spoof fewer apps
f7eec9eec124 PixelPropsUtils: Simplify GoogleCamera whitelisting
cc1cd2790259 PixelPropsUtils: Consolidate google app check
f76f02e19e8b PixelPropsUtils: Spoof user build
2d1622cf4958 base: Add switch to unlink ringtone and notifications volume [1/2]
c2e33ea928ad NetworkTraffic: Simplify stats calc to prevent issues
2ab735503066 Revert "NetworkTraffic: Handle flooding network requests"
b322747199f4 Revert "SystemUI: Rework media art filter"
26f6507d4b7e Fix com.android.server.wm.TaskFpsCallbackController#unregisterListener method NEVER works
56bc3e5f28e3 Do not crash webview if its group creation fails due to a dead process
754724a5b6de NotificationMenuRow: fix logspam
7e118202c881 BatteryStatsImpl: Avoid dividing by 0.0 in updateWifiState.
9a19d2986734 Revert "InternetDialog: Require unlocking to turn on hotspot"
8bf78e64cee3 allow toggling VoWiFi while roaming by default
8e06bade4922 Fix NPE when store brightness and displayDevice is null
fc913bc90af3 ManifestConfigSource: disable debug mode
7ee71052c8c6 InternetDialog: Require unlocking to turn on hotspot
44be70733170 Fix warnings from static analysis tool.
bc4799fb5f4d New Crowdin updates (#970)
13c5815cfa8d Update Crowdin configuration file
80632e8f77f6 base: Try loading input filter only if specified
80976511c11b base: Support for device specific input Filter
41020539fcde base: Add SmartSwitchChanged api
6770e49a3e5f opengl: Don't request render in GLSurfaceView.GLThread ctr
b31066cdd7d5 SystemUI: Enable media player surface ripple on button press
35e2645c0b8d SystemUI: VolumeDialog: add support for unlinked ringer streams

   * packages/apps/crDroidSettings
de88163 crdroid: Add pixel style lockscreen weather based OmniJaws

   * vendor/xiaomi/sm8350-common
2dda682 sm8350-common: Update display blobs from Sony Xperia 1 III (XQ-BC72) 61.2.A.0.410
6c231b6 sm8350-common: Drop advanced_sf_offsets.xml

====================
     04-27-2023
====================

   * bionic
0c10394fd Nullability check for modules in the netinet directory.

   * frameworks/native
dae35fef38 Revert "REThreaded: convert gen- and delete-Textures to no-ops"

   * packages/apps/Settings
e294d7499f Fix AppEntry.extraInfo ClassCastException
db1ba60822 Settings: Hide radio info if device don't support voice

   * vendor/qcom/opensource/fm-commonsys
ef61811 FM2: Slight design adjustments

====================
     04-26-2023
====================

   * packages/apps/crDroidSettings
656411c crdroid: Enable lockscreen weather options properly
025bd69 crdroid: Remove discontinued translations
548d129 crdroid: QS Header Image [2/2]

====================
     04-25-2023
====================

   * bionic
0797cd1a9 Nullability check for sem module.
0ec802269 Nullability check for statvfs module.

   * device/xiaomi/sm8350-common
6cf8ba66 sm8350-common: Build graphics allocator 3.0 interface to vendor
00a832e0 sm8350-common: Switch to camera.xiaomi.so

   * packages/apps/Aperture
5e225d9 Aperture: Use gradient background for exposure slider
d0be461 Aperture: Set video framerate button enabled only on one place
29a6b08 Aperture: Allow muting microphone during ongoing recording
ca59c07 Aperture: Reorganize code files/packages
98d2600 Aperture: Stop parsing sensor informations
8067e1d Aperture: Remove unused import
25b2c96 Aperture: Set `movementMethod` to null when actions are present
2ff7e0d Aperture: Fix crash on malformed Wi-Fi QR code

====================
     04-24-2023
====================

   * device/xiaomi/mars
3e83014 mars: init crDroid

   * device/xiaomi/sm8350-common
c3477f60 sm8350-common: Updated from miui_STARGlobal_V14.0.1.0.TKAMIXM
e03ec201 sm8350-common: Go away Megvii [1/2]

   * packages/apps/Aperture
5dcb779 Automatic translation import

   * packages/apps/AudioFX
9a20a91 Automatic translation import

   * packages/apps/Camera2
ab1299f9b Automatic translation import

   * packages/apps/Dialer
53b5872ef New translations (#55)

   * packages/apps/DocumentsUI
83ad60bb4 Automatic translation import

   * packages/apps/Etar
04325e2a Automatic translation import

   * packages/apps/FlipFlap
055f8f0 Automatic translation import

   * packages/apps/Jelly
92ba41f Automatic translation import

   * packages/apps/Launcher3
c2f3de0112 New Crowdin updates (#338)

   * packages/apps/Profiles
2c49be5 Automatic translation import

   * packages/apps/Recorder
b76e3a5 Automatic translation import

   * packages/apps/Settings
9c053871b7 Settings: Expose radio info (*#*#4636#*#*)
5dfb9aab0f Settings: Add switch to unlink ringtone and notifications volume [2/2]

   * packages/apps/crDroidSettings
d1d7a9e New Crowdin updates (#1046)
38aac61 crdroid: Add strings for radio info
c84e34d crdroid: Add string for linking ring and notification volumes

   * packages/providers/DownloadProvider
aa6bd80d Automatic translation import

   * packages/services/Mms
46c860d Automatic translation import

   * vendor/crowdin
e5ca6bb Automatic translation import

   * vendor/qcom/opensource/fm-commonsys
64b4992 Automatic translation import

   * vendor/xiaomi/mars
c34de04 mars: Import mars from lineage-20

   * vendor/xiaomi/mars-firmware
e6885c7 mars: Updated from miui_STARGlobal_V14.0.1.0.TKAMIXM

   * vendor/xiaomi/sm8350-common
34237f9 sm8350-common: Updated from miui_STARGlobal_V14.0.1.0.TKAMIXM

====================
     04-23-2023
====================

   * packages/apps/Launcher3
0bfdce5c3f Launcher3: Let's keep 2-button nav alive for a little longer
82650b40a1 Launcher3: Add NPE check in TaskbarDragController

====================
     04-22-2023
====================

   * android
18b5e14 manifest: Track our updated libs

   * device/lineage/sepolicy
b9c2c30 sepolicy: Allow system_server to set tethering properties

   * device/xiaomi/mars
75f6104 mars: commonize audio HAL and other lahaina firmware

   * packages/apps/WallpaperPicker2
c8faf716 WallpaperPicker2: Remove the use of smaller images for thumbnails
727e04e8 Wallpaperpicker: fix overlapping when scrolling

   * system/core
4cd5333b6 libsnapshot: fix -Wdefaulted-function-delete warnings.
2682e7b40 task_profiles: Use foreground cpuset for SurfaceFlinger
fd23cf869 init.rc: Don't enable f2fs iostat by default

====================
     04-21-2023
====================

   * bionic
f9b37f87c Nullability check for select module.
86e6eec58 Make tmpfile() respect $TMPDIR.

   * external/libvpx
41f291a libvpx: Update libwebm fragment from master
9aa8293 libvpx: Reconfigure after update
3876f39 libvpx: Update libvpx to v1.13.0+

   * frameworks/av
5ee34f38b3 Fix configuring of unrecognized level values
b33f5fd7b1 CCodecBufferChannel: exit handleWork early if output buffers are cleared
1ff7e33b9d Fix direct/offload AudoTrack playback head position on flush & re-use

   * frameworks/native
36599fe918 SF: avoid skipping waiting for the earliest time to present
d650ded0e9 Quick path to query window width and height
980de9755e sf: Avoid destroying a null layer
400b82ce5e Remove set_cpuset_policy due to new taskprofiles for SF threads
5b6e4788da Fix an arithmetic error when using unsigned
63f3c37c7a Set the maxImageExtent for vk wsi based on currentExtent
9027ab6689 vulkan: respect consumer default dataspace upon PASS_THROUGH
0c4f491d11 Allow PASS_THROUGH colorspace with R5G6B5, R16G16B16A16, A2B10G10R10
ca82a8020e Allow use of PASS_THROUGH colorspace with RGBA8
13f526e870 libgui: refactor pre-rendering feature
8247fc420d inputflinger: add absolute mouse input support
efdb507c35 Always provide metadata blob for hdr frames
a0976752e7 Enable isolated process to use graphics allocator
8bb92a4bed Add addService to pass in allowIsolated flag.
7bfdf2ad14 Increase frame history size when SF buffer queue size changes

   * vendor/lineage
18816468 Revert "Revert "config: Build NavigationBarMode2ButtonOverlay""
b9df3418 crdroid: Update Pixel props

====================
     04-20-2023
====================

   * external/arm-optimized-routines
689f733 Merge https://github.com/ARM-software/optimized-routines into 13.0

   * external/chromium-webview/patches
fde6050 Update Chromium Webview to 112.0.5615.136

   * external/chromium-webview/prebuilt/arm
19e1d28 Update Chromium Webview arm prebuilt to 112.0.5615.136

   * external/chromium-webview/prebuilt/arm64
323bf68 Update Chromium Webview arm64 prebuilt to 112.0.5615.136

   * external/chromium-webview/prebuilt/x86
8c14f82 Update Chromium Webview x86 prebuilt to 112.0.5615.136

   * external/chromium-webview/prebuilt/x86_64
86292fd Update Chromium Webview x86_64 prebuilt to 112.0.5615.136

   * external/sqlite
dca2515 sqlite: Tune flags according to docs
ab722f6 sqlite: Update to version 3.41.2

   * packages/apps/Launcher3
00da57eb0a Revert "Launcher3: Enable SHOW_DOT_PAGINATION"

====================
     04-19-2023
====================

   * android
194f3a5 manifest: Track clang 17.0.0

   * device/qcom/sepolicy_vndr-legacy-um
f1805b55 Revert "Add sepolicy rules to run imsdaemon on bengal"

   * device/xiaomi/mars
1b4e4d0 mars: set TARGET_OTA_ASSERT_DEVICE

   * external/arm-optimized-routines
04ff83e pl/math: Optimize SVE pow special cases
37158c1 pl/math: Update SVE asinh error threshold.

   * external/harfbuzz_ng
64cbd5b10 config: Enable back deprecated functions
0ffa8223d harfbuzz: strip harfbuzz with HB_LEAN

   * packages/apps/Launcher3
d1c85b26f3 Launcher3: Specify the component name to start the picker

   * prebuilts/clang/host/linux-x86/clang-latest
9b3d16b clang 17.0.0 (based on r487747)

   * system/memory/lmkd
b631c48 lmkd: Fix a comparison operation with uninitialized variable.
775c922 lmkd : Fixed running wrong for Go devices when use_minfree_levels is TRUE
89420b1 lmkd: Fixed data overflow on ARM
527c496 lmkd: measure free swap as available and easily reclaimable memory
3ab0aa2 lmkd: Fix the size of vmstat_field_names array

   * vendor/lineage
e9316898 common: Enable R8 optimizations for system_server and SystemUI
28be7deb overlay: Settings: Show memory usage in app info
858a6c2a overlay: SystemUI: Offload WM shell to another thread
fff1d9e7 overlay: Partially disable gms chimera service
376a03a2 overlay: Add google OTA to global disabledComponent

